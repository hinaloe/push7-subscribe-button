var p7sb;!function(t){"use strict";var n=jQuery,e=function(){function e(){var e=this;n(document.body).on("post-load",function(t){return e.onLoadInfinityScroll(t)}),t.update=this.updateCount,this.updateCount()}return e.prototype.updateCount=function(){var t=n("a.share-push7");t.each(function(a,r){if(!r.dataset.loaded){var o=r.href;if(o&&"string"==typeof o&&o.indexOf("appid=")!==-1){var i=o.substr(o.indexOf("appid=")+6);if(i.indexOf("&")!==-1&&(i=i.substr(0,i.indexOf("&"))),!(i.length<=0)){var u=t.filter('[href$="appid='+i+'"]');u.attr("data-loaded","loaded");var d="https://api.push7.jp/api/v1/:app_id/head".replace(":app_id",i);n.when(n.ajax({url:d,dataType:"json"}).then(function(t){return t.error?n.Deferred().reject(t.error):(u.attr("href","https://"+(t.alias?t.alias:t.domain)),void u.each(function(n,a){e.addCount(a,t.subscribers)}))})).fail(function(){u.parent().remove()})}}}})},e.addCount=function(t,n){var a=document.createElement("span");a.className="share-count",a.textContent=e.formatCount(n),t.firstChild.appendChild(a)},e.prototype.onLoadInfinityScroll=function(t){this.updateCount()},e.formatCount=function(t){return t<1e3?t.toString():t>=1e3&&t<1e4?String(t).substring(0,1)+"K+":"10K+"},e}();jQuery(function(){new e})}(p7sb||(p7sb={}));