var p7sb;!function(t){var n=jQuery,e=function(){function e(){n(document.body).on("post-load",this.onLoadInfinityScroll),t.update=this.updateCount,this.updateCount()}return e.prototype.updateCount=function(){var t=n("a.share-push7");t.each(function(t,a){if(!a.dataset.loaded){a.dataset.loaded="loaded";var r=a.href;if(r&&"string"==typeof r&&-1!==r.indexOf("appid=")){var o=r.substr(r.indexOf("appid=")+6);if(-1!==o.indexOf("&")&&(o=o.substr(0,o.indexOf("&"))),!(o.length<=0)){var i="https://api.push7.jp/api/v1/:app_id/head".replace(":app_id",o);n.when(n.ajax({url:i,dataType:"json"}).then(function(t){return t.error?n.Deferred().reject(t.error):(a.href="https://"+(t.alias?t.alias:t.domain),void e.addCount(a,t.subscribers))})).fail(function(){return a.parentNode.removeChild(a)})}}}})},e.addCount=function(t,n){var a=document.createElement("span");a.className="share-count",a.textContent=e.format_count(n),t.firstChild.appendChild(a)},e.prototype.onLoadInfinityScroll=function(t){this.updateCount()},e.format_count=function(t){return 1e3>t?t.toString():t>=1e3&&1e4>t?String(t).substring(0,1)+"K+":"10K+"},e}();jQuery(function(){return new e})}(p7sb||(p7sb={}));